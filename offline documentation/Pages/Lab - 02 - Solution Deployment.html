<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>LCG - Lab 02 - Solution Deployment</title>
	<link rel="stylesheet" type="text/css" href="../Styles/Highlight.css">
	<link rel="stylesheet" type="text/css" href="../Styles/Styles.css">
</head>
<body>
	<h1>Lab 02 - Solution Deployment</h1>
	<section>
		<p>Duration: <span class="text-bold">~10mins</span></p>
	</section>
	<section>
		<h2>1. Environment Deployment</h2>
		<p class="action">Run <span class="text-bold">LayerCake Cooker</span>.</p>
		<img src="../ScreenShots/02-01.png" title="Illustration" alt="Illustration" />
		<h4>SQL Server section</h4>
		<ul>
			<li>
				<div class="field">Database Host</div>
				<div class="description">Address or instance of the SQL Server.</div>
			</li>
			<li>
				<div class="field">Database Name</div>
				<div class="description">Name of the database. This database must not exist and will be created by the process.</div>
			</li>
			<li>
				<div class="field">Use Integrated Security SSPI</div>
				<div class="description">Option to use the Windows authentication.</div>
			</li>
			<li>
				<div class="field">User ID <span class="text-normal">(optional)</span></div>
				<div class="description">Login to connect to the SQL Server.</div>
			</li>
			<li>
				<div class="field">Password <span class="text-normal">(optional)</span></div>
				<div class="description">Password to connect to the SQL Server.</div>
			</li>
		</ul>
		<h4>Application section</h4>
		<ul>
			<li>
				<div class="field">Application Name</div>
				<div class="description">Name of the project (also used to the project namespace).</div>
				<div class="description">You should enter an application name using the following pattern <span class="text-italic">Domain.CompanyName.ProjectName</span>.</div>
			</li>
			<li>
				<div class="field">SOA Namespace</div>
				<div class="description">This URL doesn't need to exist on the network, it is only a namespace used by the WCF.</div>
			</li>
		</ul>
		<h4>Smtp Configuration section</h4>
		<ul>
			<li>
				<div class="field">Hostname</div>
				<div class="description">Hostname of the Smtp service (ISP relay, gateway's address, localhost, etc).</div>
			</li>
			<li>
				<div class="field">Port</div>
				<div class="description">Port of the Smtp service.</div>
			</li>
			<li>
				<div class="field">Username <span class="text-normal">(optional)</span></div>
				<div class="description">Login to connect to the Smtp service.</div>
			</li>
			<li>
				<div class="field">Password <span class="text-normal">(optional)</span></div>
				<div class="description">Password to connect to the Smtp service.</div>
			</li>
			<li>
				<div class="field">From Email Address</div>
				<div class="description">Email address used to fill the From field.</div>
			</li>
			<li>
				<div class="field">Redirection Email Address <span class="text-normal">(optional)</span></div>
				<div class="description">All outgoing mails will be redirected to this address (and Cc/Bcc fields will be set with empty value).</div>
			</li>
		</ul>
		<p class="action">Fill the fields about the SQL Server section and press the button <span class="text-bold">Test Connection</span> to validate.</p>
		<div class="box warning">
			<h3>Database Name</h3>
			<div class="box-content">
				<span>The database must not exist (the process will create and initialize it).</span>
			</div>
		</div>
		<p>If everything seems under control the next sections become enable.</p>
		<p class="action">Fill the other sections following the example below (adjust the values of the Smtp Configuration section with yours).</p>
		<img src="../ScreenShots/02-02.png" title="Illustration" alt="Illustration" />
		<p class="action">Press the <span class="text-bold">Process</span> button to continue.</p>
		<p class="action">Select the directory where the Visual Studio solution will be deployed.</p>
		<img src="../ScreenShots/02-03.png" title="Illustration" alt="Illustration" />

		<div class="box warning">
			<h3>Deployment Path</h3>
			<div class="box-content">
				<span>It is recommended to select a short path to avoid TooLongPathException</span>
			</div>
		</div>


		<p class="action">Press <span class="text-bold">OK</span> to run the process.</p>
		<img src="../ScreenShots/02-04.png" title="Illustration" alt="Illustration" />
		<p>Once the process is done you should have this content.</p>
		<img src="../ScreenShots/02-05.png" title="Illustration" alt="Illustration" />
		<ul>
			<li>
				<div class="field">Binaries</div>
				<div class="description">Contains tools and executables used by LayerCake Generator.</div>
			</li>
			<li>
				<div class="field">Documentation</div>
				<div class="description">Contains the documentation files.</div>
				<div class="description">Use this directory to store your project's documentation files.</div>
			</li>
			<li>
				<div class="field">Libraries</div>
				<div class="description">Contains external assemblies.</div>
				<div class="description">Use this directory to store your project's external libraries.</div>
			</li>
			<li>
				<div class="field">Src</div>
				<div class="description">Contains your application projects.</div>
			</li>
			<li>
				<div class="field">Tests</div>
				<div class="description">Contains the Unit Test projects.</div>
			</li>
			<li>
				<div class="field">Tools</div>
				<div class="description">Contains the tools (sources) that come with LayerCake Generator.</div>
			</li>
			<li>
				<div class="field">Com.Example.Labs.json</div>
				<div class="description">LayerCake Generator configuration file.</div>
			</li>
		</ul>
		<div class="box warning">
			<h3>LayerCake Generator Configuration File</h3>
			<div class="box-content">
				<span>This file should'nt be moved from the default location. Moving it may break the code generation process. However if you really want to move it, open it and report to the <span class="text-bold">Config.SolutionDir</span> key.</span>
			</div>
		</div>
		<p class="action">Open the <span class="text-bold">Src</span> folder.</p>
		<img src="../ScreenShots/02-06.png" title="Illustration" alt="Illustration" />
		<ul>
			<li>
				<div class="field">Business</div>
				<div class="description">Contains the business classes.</div>
				<div class="description">Business classes contain the business logic of the application.</div>
			</li>
			<li>
				<div class="field">ClientCore</div>
				<div class="description">Contains all the classes used at client-side.</div>
			</li>
			<li>
				<div class="field">Contracts</div>
				<div class="description">Contains the service contracts.</div>
				<div class="description">Used by the WCF layer (server and client-side).</div>
			</li>
			<li>
				<div class="field">Core</div>
				<div class="description">Contains the common classes used by the other projects.</div>
			</li>
			<li>
				<div class="field">Crud</div>
				<div class="description">Contains the classes to access to the database.</div>
			</li>
			<li>
				<div class="field">Database</div>
				<div class="description">Contains the Database Project (database scripts, stored procedures, etc).</div>
				<br />
				<div class="box warning">
					<h3>Database Project Synchronization</h3>
					<ul>
						<li>When modifying the database's structure on the SQL Server directly do not forget to synchronize the Database Project.</li>
						<li>When modifying the database's structure on the Database Project do not forget to update the database's structure using the <span class="text-bold">Compare/Update</span> operation.</li>
					</ul>
					<div class="box-content">
						<span>Finally do not forget to execute LayerCake Generator to update the project code (see later).</span>
					</div>
				</div>
			</li>
			<li>
				<div class="field">Models</div>
				<div class="description">Contains the entity and model classes.</div>
			</li>
			<li>
				<div class="field">Services</div>
				<div class="description">Contains the applicative services.</div>
			</li>
			<li>
				<div class="field">WebServices</div>
				<div class="description">Contains the WCF layer.</div>
				<div class="description">Provides an ASP.NET shell (logs, cache statistics, execution tracer, process errors, etc).</div>
			</li>
			<li>
				<div class="field">LayerCake.Generator</div>
				<div class="description">Contains the generator source code.</div>
			</li>
			<li>
				<div class="field">packages</div>
				<div class="description">Contains the NuGet packages.</div>
			</li>
			<li>
				<div class="field">System.Extensions</div>
				<div class="description">Contains common classes.</div>
			</li>
		</ul>
		<p class="action">Now have a look to the database.</p>
		<img src="../ScreenShots/02-07.png" title="Illustration" alt="Illustration" />
		<ul>
			<li>
				<div class="field">AppSettings</div>
				<div class="description">Table used to store application configuration (Key-Value pairs).</div>
			</li>
			<li>
				<div class="field">ExecutionTrace</div>
				<div class="description">Table used to store statistics on the execution time of stored procedures, methods, etc.</div>
			</li>
			<li>
				<div class="field">ProcessErrorLog</div>
				<div class="description">Table used to store stored procedures errors.</div>
				<div class="description">When an error occurred on a procedure a record is automatically inserted in this table.</div>
			</li>
			<li>
				<div class="field">ProcessLog</div>
				<div class="description">Table used to store process logs (stored procedures outputs, debug, etc).</div>
			</li>
			<li>
				<div class="field">Translation</div>
				<div class="description">Table used to store translation strings.</div>
				<div class="description">Table used by LayerCake Generator when processing (see later).</div>
			</li>
			<li>
				<div class="field">User, UserRole &amp; Role</div>
				<div class="description">Tables used to the User Authentication Support and the WCF Security Service (see later).</div>
			</li>
		</ul>
	</section>
	<section>
		<h2>2. Solution Initialization</h2>
		<p class="action">Open the Visual Studio solution and rebuild the solution.</p>
		<img src="../ScreenShots/02-08.png" title="Illustration" alt="Illustration" />
		<p class="action">Once done execute <span class="text-bold">LayerCake Generator</span>.</p>
		<p class="action">Select the configuration file and press the <span class="text-bold">Open</span> button.</p>
		<img src="../ScreenShots/02-09.png" title="Illustration" alt="Illustration" />
		<img src="../ScreenShots/02-10.png" title="Illustration" alt="Illustration" />
		<p class="action">Press the <span class="text-bold">Process</span> button (wait a moment while the process is running).</p>
		<img src="../ScreenShots/02-11.png" title="Illustration" alt="Illustration" />
		<p>When the process is finished Visual Studio may ask you to reload all the projects.</p>
		<img src="../ScreenShots/02-12.png" title="Illustration" alt="Illustration" />
		<p class="action">Compile the solution pressing <span class="text-bold">F6</span>.</p>
		<p class="action">Press <span class="text-bold">F5</span> to run the WebServices project.</p>
		<p>If everything is Ok you should see the <span class="text-bold">Monitoring Dashboard</span> (under construction).</p>
		<img src="../ScreenShots/02-13.png" title="Illustration" alt="Illustration" />
		<p>The solution is now ready to be custom.</p>
	</section>
</body>
</html>
